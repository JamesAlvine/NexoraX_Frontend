<div class="form-container">
  <h2>{{ isEdit ? 'Edit User' : 'Create New User' }}</h2>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>Email</label>
      <input type="email" formControlName="email" />
    </div>
    @if (!isEdit) {
      <div class="form-group">
        <label>Password</label>
        <input type="password" formControlName="password" />
      </div>
    }
    <div class="form-group">
      <label>Organization</label>
      <input type="text" formControlName="organization" />
    </div>
    <div class="form-group">
      <label>Apps</label>
      <div class="app-checkboxes">
        @for (app of apps; track app) {
          <label>
            <input 
              type="checkbox" 
              [checked]="selectedApps.includes(app)" 
              (change)="toggleApp(app, $event)" />
            {{ app }}
          </label>
        }
      </div>
    </div>
    <div class="form-group checkbox">
      <input type="checkbox" formControlName="is_super_admin" id="super" />
      <label for="super">Super Admin</label>
    </div>
    <div class="form-group checkbox">
      <input type="checkbox" formControlName="is_active" id="active" />
      <label for="active">Active</label>
    </div>
    <div class="form-actions">
      <button type="submit" class="btn-save">{{ isEdit ? 'Update' : 'Create' }}</button>
      <button type="button" (click)="cancel()" class="btn-cancel">Cancel</button>
    </div>
  </form>
</div>